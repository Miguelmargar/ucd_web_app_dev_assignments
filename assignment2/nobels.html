<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--<script type="text/javascript" src="nobels.json"></script>-->
    <!--<script type="text/javascript" src="nobels.js"></script>-->
    <title>Noble Prize Winners</title>
</head>

<body>
    <h1>NOBLE PRIZE WINNERS selection</h1>
    <h4>Select years</h4>
    <form id="info_needed">
        <p>From*:</p>
        <input type="numbers" name="from" id="year1" />
        <p>To*:</p>
        <input type="numbers" name="to" />
        <p>Field of Work:</p>
        <select name="category">
            <option value="all" selected>All</option>
            <option value="physics">Physics</option>
            <option value="chemistry">Chemistry</option>
            <option value="literature">Literature</option>
            <option value="peace">Peace</option>
            <option value="medicine">Medicine</option>
            <option value="economics">Economics</option>
        </select>
        <p>Country of Birth:</p>
        <input type="text" name="coutnry" />
        <br><br>
    </form>
    <input type="submit" value="Submit" onclick="display()">
    <h2>This is the information requested:</h2>

    <p id="demo"></p>
    <p id="demo2"></p>
    <div id="demo3"></div>
    <p id="demo4"></p>
    <p id="demo5"></p>
    <p id="demo6"></p>

    <script>
        function display() {
            var xmlhttp = new XMLHttpRequest();
            var url = "nobels.json";

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var myArr = JSON.parse(xmlhttp.responseText);
                    displayJSON(myArr);
                }
            };

            xmlhttp.open("GET", url, true);
            xmlhttp.send();

            var info1 = document.getElementById("info_needed").elements[0].value;
            var info2 = document.getElementById("info_needed").elements[1].value;
            var info3 = document.getElementById("info_needed").elements[2].value;
            var info4 = document.getElementById("info_needed").elements[3].value;


            function displayJSON(myArr) {
                var nobels = myArr["laureates"];
                

                if (parseInt(info1) > parseInt(info2)) {
                    alert("The start date has to  be at least the same as the end date");
                }
                else if (parseInt(info1) <= parseInt(info2)) {
                    for (var i in nobels) {
                        for (var j in nobels[i].prizes) {
                            for (var k in nobels[i].prizes[j].affiliations) {
                                
                                if (parseInt(nobels[i].prizes[j].year) >= parseInt(info1) && parseInt(nobels[i].prizes[j].year) <= parseInt(info2) && info3 == "all") {
                                    document.getElementById("demo3").innerHTML +=
                                        "<h2>Nobel Winner details:</h2>" +
                                        "<p>Name: " + nobels[i].firstname + "</p>" +
                                        "<p>Surname: " + nobels[i].surname + "</p>" +
                                        "<p>Field of Work: " + nobels[i].prizes[j].category + "</p>" +
                                        "<p>Year of Price: " + nobels[i].prizes[j].year + "</p>";    
                                }
                                
                                
                                else if (parseInt(nobels[i].prizes[j].year) >= parseInt(info1) && parseInt(nobels[i].prizes[j].year) <= parseInt(info2) && info3 !="all") {
                                        if (nobels[i].prizes[j].category == info3) {
                                            document.getElementById("demo2").innerHTML = info3;
                                            document.getElementById("demo3").innerHTML +=
                                        "<h2>Nobel Winner details:</h2>" +
                                        "<p>Name: " + nobels[i].firstname + "</p>" +
                                        "<p>Surname: " + nobels[i].surname + "</p>" +
                                        "<p>Field of Work: " + nobels[i].prizes[j].category + "</p>" +
                                        "<p>Year of Price: " + nobels[i].prizes[j].year + "</p>";
                                        } 
                                     }
                                }
                            }
                        }
                    }
                }
            }
    </script>

</body>

</html>
