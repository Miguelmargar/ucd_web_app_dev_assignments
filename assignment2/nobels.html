<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--<script type="text/javascript" src="nobels.json"></script>-->
    <!--<script type="text/javascript" src="nobels.js"></script>-->
    <title>Noble Prize Winners</title>
</head>

<body>
    <h1>NOBLE PRIZE WINNERS selection</h1>
    <h4>Select years</h4>
    <form id="info_needed">
        <p>From*:</p>
        <input type="numbers" name="from" id="year1" />
        <p>To*:</p>
        <input type="numbers" name="to" />
        <p>Field of Work:</p>
        <input type="text" name="area" />
        <p>Country of Birth:</p>
        <input type="text" name="coutnry" />
        <br><br>
    </form>
    <input type="submit" value="Submit" onclick="display()">
    <h2>This is the information requested:</h2>

    <p id="demo"></p>
    <p id="demo2"></p>
    <p id="demo3"></p>
    <p id="demo4"></p>
    <p id="demo5"></p>
    <p id="demo6"></p>

    <script>
        function display() {
            var xmlhttp = new XMLHttpRequest();
            var url = "nobels.json";

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var myArr = JSON.parse(xmlhttp.responseText);
                    displayJSON(myArr);
                }
            };

            xmlhttp.open("GET", url, true);
            xmlhttp.send();

            var info1 = document.getElementById("info_needed").elements[0].value;
            var info2 = document.getElementById("info_needed").elements[1].value;
            var info3 = document.getElementById("info_needed").elements[2].value;
            var info4 = document.getElementById("info_needed").elements[3].value;

            


            function displayJSON(myArr) {
                var nobels = myArr["laureates"];
                // document.getElementById("demo3").innerHTML = nobels[0].prizes[0].year;



                if (parseInt(info1) > parseInt(info2)) {
                    alert("The start date has to  be at least the same as the end date");
                }
                else if (parseInt(info1) <= parseInt(info2)){
                    for (var i in nobels) {
                        for (var j in nobels[i].prizes) {
                            if (parseInt(nobels[i].prizes[j]) >= parseInt(info1) && parseInt(nobels[i].prizes[j]) <= parseInt(info2) ) {
                                document.getElementById("demo3").innerHTML = nobels[i].prizes[j].year;
                            }
                        }
                    }
                }
            }
        }
    </script>

</body>

</html>
